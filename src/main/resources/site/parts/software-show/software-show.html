<article class="software-show">

    <header class="software-show__header">
        <img class="software-show__software-icon" data-th-if="${iconUrl}" data-th-src="${iconUrl}"
             data-th-alt="${software.displayName + ' icon'}"/>

        <div data-th-if="${selectedVersion}" data-th-remove="tag">

            <button class="software-show__download-button"
                    data-th-classappend="'software-show__download-button--' + ${softwareType}">
                <div data-th-if="${softwareType == 'starter'}" data-th-remove="tag">
                    <svg data-th-replace="/lib/enonic/market/fragments::icon-fragment(icon=clone,class=software-show__download-button-icon)"></svg>
                    <span>Clone</span>
                </div>
                <div data-th-if="${softwareType == 'library'}" data-th-remove="tag">
                    <svg data-th-replace="/lib/enonic/market/fragments::icon-fragment(icon=download,class=software-show__download-button-icon)"></svg>
                    <span>Download</span>
                </div>
                <div data-th-if="${softwareType == 'application'}" data-th-remove="tag">
                    <svg data-th-replace="/lib/enonic/market/fragments::icon-fragment(icon=dollar,class=software-show__download-button-icon)"></svg>
                    <span>Free</span>
                </div><!--
                <span data-th-if="${softwareType == 'starter'}" data-th-text="'Clone'" data-th-remove="tag">Clone</span>
                <span data-th-if="${softwareType == 'library'}" data-th-text="'Download'" data-th-remove="tag">Download</span>
                <span data-th-if="${softwareType == 'application'}" data-th-text="'$ free'" data-th-remove="tag">Free</span>-->
            </button>

        </div>

        <h1 class="software-show__heading" data-th-text="${software.displayName}">Software name</h1>

        <p class="software-show__subtitle" data-th-if="${software.data.shortDescription}"
           data-th-text="${software.data.shortDescription}">Subtitle</p>

    </header>

    <div class="software-show__metadata-bar">
        <div class="software-show__metadata-list-container">
            <ul class="software-show__metadata-list">
                <li class="software-show__metadata-item software-show__metadata-item--license"
                    data-th-if="${licenseType and licenseType.url and licenseType.name}">
                    <svg class="software-show__metadata-icon" role="presentation">
                        <use data-th-attr="'xlink:href'=${portal.assetUrl({'_path=img/icons/icons.svg'}) + '#gavel'}"></use>
                    </svg>
                    <span class="software-show__metadata-label">License: </span>
                    <a class="software-show__metadata-text" data-th-href="${licenseType.url}">
                        <span class="software-show__metadata-text--normal" data-th-text="${licenseType.name}">License</span>
                        <span class="software-show__metadata-text--short">Open Source</span>
                    </a>
                </li>
                <li class="software-show__metadata-item software-show__metadata-item--doc-link"
                    data-th-if="${software.data.documentationUrl}">
                    <svg class="software-show__metadata-icon" role="presentation">
                        <use data-th-attr="'xlink:href'=${portal.assetUrl({'_path=img/icons/icons.svg'}) + '#book'}"></use>
                    </svg>
                    <a class="software-show__metadata-text" data-th-href="${software.data.documentationUrl}">
                        <span class="software-show__metadata-text--normal">Documentation</span>
                        <span class="software-show__metadata-text--short">Docs</span>
                    </a>
                </li>
                <li class="software-show__metadata-item software-show__metadata-item--version"
                    data-th-if="${newestVersion}">
                    <svg class="software-show__metadata-icon" role="presentation">
                        <use data-th-attr="'xlink:href'=${portal.assetUrl({'_path=img/icons/icons.svg'}) + '#code-fork'}"></use>
                    </svg>
                    <a class="software-show__metadata-text" data-th-href="${sourceCodeLink}">
                        <span class="software-show__metadata-label">Latest version: </span>
                        <span class="software-show__metadata-text" data-th-text="${newestVersion.versionNumber}">x.y.z</span>
                    </a>
                </li>

                <li class="software-show__metadata-item software-show__metadata-item--date"
                    data-th-if="${newestVersion}">
                    <svg class="software-show__metadata-icon" role="presentation">
                        <use data-th-attr="'xlink:href'=${portal.assetUrl({'_path=img/icons/icons.svg'}) + '#clock-o'}"></use>
                    </svg>
                    <span class="software-show__metadata-label">Date: </span>
                    <span class="software-show__metadata-text">
                        <span class="software-show__metadata-text--normal" data-th-text="${newestVersion.versionDatePrettified}">Date</span>
                        <span class="software-show__metadata-text--short" data-th-text="${newestVersion.versionDate}">Date</span>
                    </span>
                </li>

                <li class="software-show__metadata-item software-show__metadata-item--vendor"
                    data-th-if="${vendor}">
                    <svg class="software-show__metadata-icon" role="presentation">
                        <use data-th-attr="'xlink:href'=${portal.assetUrl({'_path=img/icons/icons.svg'}) + '#user'}"></use>
                    </svg>
                    <span class="software-show__metadata-label">By: </span>
                    <a class="software-show__metadata-text" data-th-href="${portal.pageUrl({'_id=' + vendor._id})}">
                        <span class="software-show__metadata-text--normal" data-th-text="${vendor.displayName}">Vendor</span>
                        <span class="software-show__metadata-text--short" data-th-text="${vendor.displayName}">Vendor</span>
                    </a>
                </li>
            </ul>
        </div>

    </div>


    <div class="software-show__body">

        <section class="software-show__screenshots enonicarousel" data-th-if="${hasScreenshots}">
            <h2 class="visually-hidden">Screenshots</h2>
            <ul class="software-show__screenshot-list enonicarousel__list">

                <li class="software-show__screenshot-item software-show__screenshot-item--video enonicarousel__slide"
                     data-th-attr="data-youtube-id=${software.data.videoID}"
                     data-th-if="${software.data.videoID}">
                    <img class="software-show__screenshot-img" data-th-src="${portal.imageUrl({'_id=' + software.data.videoScreenshot, '_scale=block(990, 556)', '_format=jpg', '_quality=90'})}"
                         src="" alt=""/>
                    <button class="software-show__play-video" data-th-attr="data-youtube-id=${software.data.videoID}">
                        <span class="visually-hidden" data-th-text="'Play video \'' + ${software.data.videoTitle} + '\''">Play video</span>
                    </button>
                </li>

                <li class="software-show__screenshot-item enonicarousel__slide"
                    data-th-each="screenshot : ${software.data.screenshots}">
                    <a class="software-show__screenshot-link"
                       data-th-href="${portal.imageUrl({'_id=' + screenshot.img, '_scale=width(1024)'})}">
                        <img class="software-show__screenshot-img" src=""
                             data-th-src="${portal.imageUrl({'_id=' + screenshot.img, '_scale=block(990,556)', '_format=jpg', '_quality=90'})}"
                             data-th-attr="alt=${screenshot.label}"/>
                    </a>
                </li>
            </ul>
        </section>

        <section class="software-show__description"
             data-th-if="${software.data.details}">
            <div data-th-utext="${software.data.details}">Details</div>
        </section>

        <section class="software-show__changelog">
            <h2>Releases</h2>
            <ol class="software-show__changelog-version-list">
                <li class="software-show__changelog-version-item" data-th-each="version : ${versions}">
                    <header class="software-show__changelog-version-header">
                        <h4 class="software-show__changelog-version-heading" data-th-text="${version.versionNumber}">
                            Version number</h4>
                        <time class="software-show__changelog-version-date"
                              data-th-attr="datetime=${version.versionDate}"
                              data-th-text="${version.versionDatePrettified}">Version date
                        </time>
                    </header>
                    <ul class="software-show__changelog-entry-list">
                        <li class="software-show__changelog-entry-item"
                            data-th-each="changelogEntry : ${version.changelogEntry}"
                            data-th-text="${changelogEntry}"></li>
                        <li class="software-show__compatibility" data-th-if="${version.supportedVersions}">
                            <h5 class="software-show__compatibility-heading" title="Minimum required XP version (per major version)">Compatibility:</h5>
                            <ul class="software-show__compatibility-list">
                                <li class="software-show__compatibility-item" data-th-each="supportedVersion : ${version.supportedVersions}"
                                    data-th-text="${supportedVersion}"></li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ol>
        </section>

        <section class="software-show__comments">
            <h2 class="software-show__comments-heading">Comments</h2>
            <div data-th-if="${!liveMode}" data-th-remove="tag">
                <p>Not available in Page Editor or Preview modes.</p>
            </div>
            <div data-th-if="${liveMode}" data-th-remove="tag">
                <div id="disqus_thread"></div>
                <script data-th-inline="javascript">

                    /*<![CDATA[*/

                    var disqusPageUrl = /*[[${portal.pageUrl({'_id=' + software._id})}]]*/ '';
                    var disqusPageIdentifier = /*[[${software._id}]]*/ '';

                    /*]]>*/

                    /**
                     * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                     * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
                     */

                    var disqus_config = function () {
                        //this.page.url = disqusPageUrl; // Replace PAGE_URL with your page's canonical URL variable
                        this.page.identifier = disqusPageIdentifier; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                    };

                    (function() { // DON'T EDIT BELOW THIS LINE
                        var d = document, s = d.createElement('script');

                        s.src = '//enonicmarket.disqus.com/embed.js';

                        s.setAttribute('data-timestamp', +new Date());
                        (d.head || d.body).appendChild(s);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

            </div>
        </section>



        <div class="software-show__download-instructions">
            <div data-th-if="${softwareType == 'application'}" class="software-show__download-instructions-container">


                <header class="modal__header software-show__download-instructions-header">
                    <h2 class="software-show__download-instructions-heading" data-th-text="'Get ' + ${software.displayName} + ' application'">Install</h2>


                    <select class="software-show__version-select" data-th-if="${versions}">
                        <div data-th-each="version : ${versions}" data-th-remove="tag">
                            <option data-th-text="'v.' + ${version.versionNumber} + ${(version.versionNumber == newestVersion.versionNumber) ? ' - latest' : '' }"
                                    data-th-attr="value=${version.versionNumber}, selected=${selectedVersion.versionNumber == version.versionNumber ? 'selected' : null}"></option>
                        </div>

                    </select>
                </header>


                <div class="modal__body software-show__download-instructions-body">
                    <div class="software-show__download-instructions-tabs js-tabs">
                        <ul class="js-tabs__list">
                            <li class="js-tabs__item">
                                <a href="#cloud-trial" id="tabs-label__cloud-trial" class="js-tabs__link">Cloud trial</a>
                            </li>
                            <li class="js-tabs__item">
                                <a href="#install-app" id="tabs-label__install-app" class="js-tabs__link">Install</a>
                            </li>
                        </ul>
                        <div id="cloud-trial" class="js-tabs__panel">
                            <p>Get 5 days free hosted version of "<span data-th-text="${software.displayName}"></span>" application for <a href="https://enonic.com">Enonic XP</a>.</p>


                            <form class="software-show__cloud-trial-form validate" id="software-show__cloud-trial-form" data-form-success-container=".software-show__download-instructions-container" method="post" data-th-action="${postUrl}"
                                  data-th-if="${!urlParams.submitted}">

                                <div class="form">
                                    <label class="form__label">
                                        <span class="form__label-text form__label-text--required">E-mail:</span>
                                        <input class="software-show__cloud-trial-form-input form__input" type="email" name="cloud-trial-email" required="required" placeholder="E-mail"/>
                                    </label>
                                    <input type="hidden" name="software" data-th-value="${software.displayName}"/>
                                    <button class="software-show__cloud-trial-form-submit" type="submit">Request free trial</button>
                                </div>
                            </form>

                        </div>
                        <div id="install-app" class="js-tabs__panel">


                            <p>To install and run this app, you will need a running instance of <a href="https://enonic.com">Enonic XP</a>. The app can be installed in several ways.</p>

                            <section class="software-show__install-app-section software-show__install-app-section--xp">
                                <h3 class="software-show__install-app-heading">Install from XP</h3>
                                <p>Applications from Enonic Market can be installed directly from the "Applications" app in Enonic XP.</p>
                                <p>
                                    <a href="http://xp.readthedocs.io/en/stable/developer/projects/deploy.html">'Installing an application' documentation</a>
                                </p>
                            </section>

                            <section class="software-show__install-app-section software-show__install-app-section--toolbox">
                                <h3 class="software-show__install-app-heading">Install with toolbox</h3>
                                <div class="software-show__toolbox-code software-show__toolbox-code--bash" data-th-if="${installAppCommands && installAppCommands.bash}">
                                    <h4 class="software-show__toolbox-code-heading">OSX/Linux</h4>
                                    <div class="software-show__toolbox-code-command">
                                        <input id="software-show__toolbox-code-command-input--app-bash" class="software-show__toolbox-code-command-input" data-th-value="${installAppCommands.bash}" data-th-attr="data-version-placeholder=${installAppCommandsPlaceholder.bash}" data-placeholder-replace="value"/>
                                    </div>
                                    <div class="software-show__toolbox-code-clipboard-btn-container">
                                        <button class="software-show__toolbox-code-clipboard-btn" data-clipboard-target="#software-show__toolbox-code-command-input--app-bash">
                                            <svg class="software-show__toolbox-code-clipboard-btn-icon" role="presentation">
                                                <use data-th-attr="'xlink:href'=${portal.assetUrl({'_path=img/icons/icons.svg'}) + '#clipboard'}"></use>
                                            </svg>
                                            <span>Copy</span>
                                        </button>
                                    </div>

                                </div>
                                <div class="software-show__toolbox-code software-show__toolbox-code--batch" data-th-if="${installAppCommands && installAppCommands.batch}">
                                    <h4 class="software-show__toolbox-code-heading">Windows</h4>
                                    <div class="software-show__toolbox-code-command">
                                        <input id="software-show__toolbox-code-command-input--app-batch" class="software-show__toolbox-code-command-input" data-th-value="${installAppCommands.batch}" data-th-attr="data-version-placeholder=${installAppCommandsPlaceholder.batch}" data-placeholder-replace="value"/>
                                    </div>
                                    <div class="software-show__toolbox-code-clipboard-btn-container">
                                        <button class="software-show__toolbox-code-clipboard-btn" data-clipboard-target="#software-show__toolbox-code-command-input--app-batch">
                                            <svg class="software-show__toolbox-code-clipboard-btn-icon" role="presentation">
                                                <use data-th-attr="'xlink:href'=${portal.assetUrl({'_path=img/icons/icons.svg'}) + '#clipboard'}"></use>
                                            </svg>
                                            <span>Copy</span>
                                        </button>
                                    </div>

                                </div>

                                <p>The install-app tool installs an application on all nodes. Remember to replace <strong>&lt;username&gt;</strong> and <strong>&lt;password&gt;</strong> with your admin login credentials.</p>



                                <p><a href="http://xp.readthedocs.io/en/stable/developer/projects/deploy.html">Complete
                                    install-app documentation</a></p>
                            </section>

                            <section class="software-show__install-app-section software-show__install-app-section--jar">
                                <h3 class="software-show__install-app-heading">Download JAR</h3>


                                <a class="software-show__download-instructions-download-btn" data-th-if="${jarUrl and !#strings.isEmpty(jarUrl)}"
                                   data-th-href="${jarUrl}" data-th-attr="data-version-placeholder=${jarPlaceholderUrl}" data-placeholder-replace="href">
                                    <span data-th-text="'Download ' + ${software.displayName} + ' v' + ${selectedVersion.versionNumber}" data-th-attr="data-version-placeholder=${'Download ' + software.displayName + ' vVERSIONPLACEHOLDER'}" data-placeholder-replace="text">Download</span>
                                </a>

                            </section>








                        </div>
                    </div>
                </div>








            </div>
            <div data-th-if="${softwareType == 'starter'}">
                <h2 class="software-show__download-instructions-heading" data-th-text="'Clone ' + ${software.displayName}">Clone</h2>


                <select class="software-show__version-select" data-th-if="${versions}">
                    <div data-th-each="version : ${versions}" data-th-remove="tag">
                        <option data-th-text="'v.' + ${version.versionNumber} + ${(version.versionNumber == newestVersion.versionNumber) ? ' - latest' : '' }"
                                data-th-attr="value=${version.versionNumber}, selected=${selectedVersion.versionNumber == version.versionNumber ? 'selected' : null}"></option>
                    </div>

                </select>

                <div class="software-show__download-instructions-body">
                    <p>To initialize a new project based on <span data-th-text="${software.displayName}">this starter</span>, execute the command below. Remember to replace <strong>&lt;com.company.myapp&gt;</strong> with a unique name for your app, and <strong>&lt;/my/projects&gt;</strong> with the location you want to store the project.
                        <strong>&lt;$XP_INSTALL&gt;</strong> is the location of your XP installation.
                    </p>



                    <div class="software-show__toolbox-code software-show__toolbox-code--bash">
                        <h3 class="software-show__toolbox-code-heading">OSX/Linux</h3>
                        <div class="software-show__toolbox-code-command">
                            <input id="software-show__toolbox-code-command-input--starter-bash" class="software-show__toolbox-code-command-input" data-th-value="${initProjectCommands.bash}"/>
                        </div>
                        <div class="software-show__toolbox-code-clipboard-btn-container">
                            <button class="software-show__toolbox-code-clipboard-btn" data-clipboard-target="#software-show__toolbox-code-command-input--starter-bash">
                                <svg class="software-show__toolbox-code-clipboard-btn-icon" role="presentation">
                                    <use data-th-attr="'xlink:href'=${portal.assetUrl({'_path=img/icons/icons.svg'}) + '#clipboard'}"></use>
                                </svg>
                                <span>Copy</span>
                            </button>
                        </div>

                    </div>

                    <div class="software-show__toolbox-code software-show__toolbox-code--bash">
                        <h3 class="software-show__toolbox-code-heading">Windows</h3>
                        <div class="software-show__toolbox-code-command">
                            <input id="software-show__toolbox-code-command-input--starter-batch" class="software-show__toolbox-code-command-input" data-th-value="${initProjectCommands.batch}"/>
                        </div>
                        <div class="software-show__toolbox-code-clipboard-btn-container">
                            <button class="software-show__toolbox-code-clipboard-btn" data-clipboard-target="#software-show__toolbox-code-command-input--starter-batch">
                                <svg class="software-show__toolbox-code-clipboard-btn-icon" role="presentation">
                                    <use data-th-attr="'xlink:href'=${portal.assetUrl({'_path=img/icons/icons.svg'}) + '#clipboard'}"></use>
                                </svg>
                                <span>Copy</span>
                            </button>
                        </div>

                    </div>




                    <p>The init-project tool initializes a new application project structure by retrieving a Git repository,
                        removing all references to the Git repository, and adapting its build file properties
                        (gradle.properties).</p>

                    <p><a href="http://xp.readthedocs.org/en/latest/reference/toolbox/init-project.html">Complete
                        init-project documentation</a></p>
                </div>



            </div>
            <div data-th-if="${softwareType == 'library'}">
                <h2 class="software-show__download-instructions-heading" data-th-text="'Download ' + ${software.displayName}">Download</h2>


                <select class="software-show__version-select" data-th-if="${versions}">
                    <div data-th-each="version : ${versions}" data-th-remove="tag">
                        <option data-th-text="'v.' + ${version.versionNumber} + ${(version.versionNumber == newestVersion.versionNumber) ? ' - latest' : '' }"
                                data-th-attr="value=${version.versionNumber}, selected=${selectedVersion.versionNumber == version.versionNumber ? 'selected' : null}"></option>
                    </div>

                </select>

                <div class="software-show__download-instructions-body">
                    <p>An XP library is normally included in your application through the Gradle build script like this:</p>



                <pre data-th-if="${software.data.groupId and software.data.artifactId and selectedVersion.versionNumber}"><code class="software-show__download-instructions-gradle-code language-clike"
                                                                                                                                data-th-text="'dependencies {&#13;&nbsp;&nbsp;&nbsp;&nbsp;include \'' + ${software.data.groupId + ':' + software.data.artifactId + ':' + selectedVersion.versionNumber} + '\'&#13;}'" data-th-attr="data-version-placeholder=${'dependencies {&#13;&nbsp;&nbsp;&nbsp;&nbsp;include \'' + software.data.groupId + ':' + software.data.artifactId + ':VERSIONPLACEHOLDER' + '\'&#13;}'}" data-placeholder-replace="text"/></pre>


                <pre data-th-if="${software.data.mavenRepository}"><code class="software-show__download-instructions-gradle-code language-clike"
                                                                         data-th-text="'repositories {&#13;&nbsp;&nbsp;&nbsp;&nbsp;maven {&#13;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; url \'' + ${software.data.mavenRepository} + '\'&#13;&nbsp;&nbsp;&nbsp;&nbsp;}&#13;}'"/></pre>

                    <p>
                        <a data-th-if="${software.data.sourceCodeUrl}" data-th-href="${software.data.sourceCodeUrl}" data-th-text="'Download the source code for ' + ${software.displayName}">Source code</a>
                    </p>

                    <p>
                        <a data-th-if="${software.data.documentationUrl}" data-th-href="${software.data.documentationUrl}"
                           data-th-text="'Documentation for ' + ${software.displayName}">Documentation</a>
                    </p>
                </div>




            </div>
        </div>

    </div>
</article>
